<!doctype html>
<link rel="stylesheet" href="../../src/ui-scripts/tooltip/tooltip.css">
<style>
html,
body
{
	margin: 0;
	height: 100%;
	overflow: hidden;
}

#viewport
{
	height: 100%;
	overflow: auto;
}

#viewport > div
{
	float: left;
	padding: 10px;
}

h2
{
	width: 150px;
	padding: 10px;
	margin: 0;
	background-color: hsl(0, 0%, 90%);
	border-radius: 5px;
	text-align: center;
}

ul
{
	list-style: none;
	padding: 0;
}

span
{
	border: 1px solid hsl(0, 0%, 95%);
}

span:hover,
.hover
{
	background-color: hsl(210, 100%, 80%);
}
</style>
<script src="../../src/scripts/dom.js"></script>
<script src="../../src/ui-scripts/tooltip/tooltip.js"></script>

<script>

window.onload = function()
{
	var tmpl = [];
	var cur = null;

	tmpl.push(cur = ['div', ['h2', 'default']]);
	for (var i = 1, ul; i < 4; i++)
	{
		cur.push(ul = ['ul']);
		for (var j = 0; j < 7; j++)
			ul.push(['li', 
			        ['span', 'item ' + (i * j),
			                 'data-tooltip', 'test',
			                 'data-tooltip-text', 'test ' + (i * j)]]);
		
	}

	tmpl.push(cur = ['div', ['h2', 'keep on hover']]);
	for (var i = 1, ul; i < 4; i++)
	{
		cur.push(ul = ['ul']);
		for (var j = 0; j < 7; j++)
			ul.push(['li', 
			        ['span', 'item ' + (i * j),
			                 'data-tooltip', 'test2',
			                 'data-tooltip-text', 'test ' + (i * j)]]);
		
	}

	tmpl.push(cur = ['div', ['h2', 'keep on hover with fixed offset']]);
	for (var i = 1, ul; i < 4; i++)
	{
		cur.push(ul = ['ul']);
		for (var j = 0; j < 7; j++)
			ul.push(['li', 
			        ['span', 'item ' + (i * j),
			                 'data-tooltip', 'test3',
			                 'data-tooltip-text', 'test ' + (i * j)]]);
		
	}

	document.getElementById('viewport').render(tmpl);
	
	Tooltips.register("test");

	(function()
  {
  	var tooltip = Tooltips.register("test2", true);
  	var last_target = null;
  	var reset_last_target = function()
  	{
  		if (last_target)
  			last_target.removeClass('hover');
  	};

  	tooltip.ontooltip = function(event, target)
  	{
  		this.show();
  		last_target = target;
  	};

   	tooltip.ontooltipenter = function()
  	{
  		if (last_target)
  			last_target.addClass('hover');
  	};

  	tooltip.ontooltipleave = function()
  	{
  		if (last_target)
  			last_target.removeClass('hover');
  	};

  })();

 	(function()
  {
  	var tooltip = Tooltips.register("test3", true);
  	var last_target = null;
  	var reset_last_target = function()
  	{
  		if (last_target)
  			last_target.removeClass('hover');
  	};

  	tooltip.ontooltip = function(event, target)
  	{
  		var box = target.getBoundingClientRect();
  		this.show(null, {top: box.top, bottom: box.bottom, left: box.left + 30});
  		last_target = target;
  	};

   	tooltip.ontooltipenter = function()
  	{
  		if (last_target)
  			last_target.addClass('hover');
  	};

  	tooltip.ontooltipleave = function()
  	{
  		if (last_target)
  			last_target.removeClass('hover');
  	};

  })();

}
</script>

<div id="viewport"></div>
